# 資産ロック開始の指図/相続人バリデーション設計

## 目的
資産ロック開始時に、(1) 有効な指図が0件、または (2) 有効な指図の中に相続人未設定の指図がある場合、資産ロックを開始できないようにする。UI と Functions の両方で防止し、操作ミスとAPI直叩きの双方を防ぐ。

## スコープ
- Functions/API: `POST /v1/cases/:caseId/asset-lock/start` の開始条件を追加
- Web UI: AssetLockPage の準備ステップ/開始ボタンの無効化と理由表示

## 用語/判定
- **有効な指図**: `status !== "INACTIVE"` の指図
- **指図が0件**: 有効な指図が存在しない
- **相続人未設定の指図**: `heirUids` が空配列の指図

## API 仕様変更
- `asset-lock/start` で `plans` を取得し以下を判定
  1. 有効な指図が0件 → 400 / `NOT_READY` / 「相続対象の指図がありません」
  2. 有効な指図のいずれかが `heirUids` 空 → 400 / `NOT_READY` / 「相続人が未設定の指図があります」
- 既存の相続人ウォレット未検証エラーは維持

## UI 仕様変更
- 準備ステップで指図/相続人情報を読み込み済みの場合に、同一条件でチェック
- 条件未達の場合
  - 被相続人の「確認しました」を無効化
  - 方式選択後の「ロックを開始」を無効化
  - 理由文を表示（必要なら該当指図名を補足表示）

## テスト方針
- Functions: `asset-lock/start` の新規ガード2種の失敗ケースを追加
- Web: AssetLockPage の表示・ボタン無効化条件のレンダリングテストを追加

## 非スコープ
- 指図/相続人の作成フローの改善
- 既存の指図状態・ロック状態のデータ修復
